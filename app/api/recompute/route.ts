import { NextResponse } from 'next/server';import { prisma } from '@/lib/db';import { getActiveRules } from '@/lib/rules';import { scoreAndUpsert } from '@/lib/scoring';export async function POST(){const rules=await getActiveRules();const all=await prisma.movement.findMany({select:{id:true}});for(const {id} of all){await scoreAndUpsert(id,rules)}return NextResponse.json({ok:true,count:all.length})}
