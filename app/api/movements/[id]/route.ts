import { NextRequest, NextResponse } from 'next/server';import { prisma } from '@/lib/db';export async function GET(_:NextRequest,{params}:{params:{id:string}}){const item=await prisma.movement.findUnique({where:{id:params.id},include:{score:true}});if(!item) return new NextResponse('Not found',{status:404});const parsed=item&&item.score?{...item,score:{...item.score,reasons:(()=>{try{return JSON.parse((item.score as any).reasons)}catch{return[]}})(),ruleHits:(()=>{try{return JSON.parse((item.score as any).ruleHits)}catch{return[]}})(),}}:item;return NextResponse.json(parsed)}
